(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,i(a.key),a)}}function i(e){var i=function(e,i){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,i||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==t(i)?i:i+""}new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initWPMedia(),this.initDateTimePicker()},i=[{key:"initWPMedia",value:function(){var t;(t=jQuery)(document).on("click",".wpsp-admin-media-upload .button-upload",function(e){e.preventDefault();var i=t(this).closest(".wpsp-admin-media-upload"),n=i.find(".media-attachment-value"),a=i.find(".media-url-value"),r=i.find(".preview-image"),o=i.find(".button-remove"),u=i.data("title")||"Chọn hoặc upload media",l=i.data("button")||"Sử dụng media",d=i.data("mediaFrame");d||((d=wp.media({title:u,button:{text:l},library:{type:["image"]},multiple:!1})).on("open",function(){var t=d.state().get("selection"),e=n.val();if(t.reset(),e){var i=wp.media.attachment(e);i.fetch(),t.add(i)}}),d.on("select",function(){var t,e=d.state().get("selection").first().toJSON();n.val(e.id),a.val(e.url);var i=(null===(t=e.sizes)||void 0===t||null===(t=t.thumbnail)||void 0===t?void 0:t.url)||e.url;r.attr("src",i).show(),o.show()}),i.data("mediaFrame",d)),d.open()}),t(document).on("click",".wpsp-admin-media-upload .button-remove",function(){var e=t(this).closest(".wpsp-admin-media-upload");e.find(".media-attachment-value").val(""),e.find(".media-url-value").val(""),e.find(".preview-image").attr("src","").hide(),t(this).hide()})}},{key:"initDateTimePicker",value:function(){jQuery(".wpsp-admin-date-picker").datepicker({dateFormat:"dd/mm/yy"})}}],i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n}())})();