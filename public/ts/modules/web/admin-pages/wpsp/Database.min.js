(()=>{function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(a)}function a(e,a){for(var n=0;n<a.length;n++){var s=a[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,t(s.key),s)}}function n(e,a,n){return(a=t(a))in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function t(a){var n=function(a,n){if("object"!=e(a)||!a)return a;var t=a[Symbol.toPrimitive];if(void 0!==t){var s=t.call(a,n||"default");if("object"!=e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(a)}(a,"string");return"symbol"==e(n)?n:n+""}new(function(){return e=function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"message","#handle_database_message"),n(this,"messageInner","#handle_database_message_inner"),this.handleDatabase()},t=[{key:"handleDatabase",value:function(){var e=this;jQuery(function(a){a("body").on("click",".handle-database-button",function(n){a(e.message).hasClass("hidden")||e.addMessage("-----------------------------------------<br/>");var t=a(n.currentTarget).attr("data-type");e.requestHandleDatabase(t)})})}},{key:"requestHandleDatabase",value:function(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;jQuery(function(t){t.ajax(window.wpsp_localize.ajax_url,{method:"POST",data:{action:"wpsp_handle_database",type:e,nonce:window.wpsp_localize.nonce},success:function(e){t(a.message).removeClass("hidden"),e.success?(void 0!==e.data.actions&&(n=null!=n?n:e.data.actions),n[0]?(a.addMessage(e.message),a.requestHandleDatabase(n[0],n.slice(1))):(a.addMessage(e.message,"notice notice-success"),setTimeout(function(){window.location.reload()},2e3))):(a.addMessage(e.message,"notice notice-error"),setTimeout(function(){t(".database-aditional-action-buttons").removeClass("hidden"),t(".database-aditional-action-message").removeClass("hidden")},1e3))}})})}},{key:"addMessage",value:function(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;jQuery(function(t){n&&t(a.message).removeClass().addClass(n),t(a.message).find(a.messageInner).append(e).show(),t(a.messageInner).scrollTop(t(a.messageInner).prop("scrollHeight"))})}}],t&&a(e.prototype,t),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,s}())})();